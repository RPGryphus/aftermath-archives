//	FONT AWESOME
$(function(){
  if (!$.sceditor) return;
  var defaultSize = 18, // taille par défaut des icônes
      autoClose = 1, // ferme automatiquement la popup après la sélection d'une icône si activé
 
      // Liste d'icônes
      fa = ['','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','','',''],
      A = '', O = A;
 
  // si la taille est supérieur à 0, on formate une taille par défaut pour les icônes
  if (defaultSize) {
    A += '[size=' + defaultSize + ']';
    O += '[/size]';
  }
 
  // crée un bouton sur l'éditeur et une fenêtre de sélection
  $.sceditor.command.set('fontawesome', {
 
    dropDown : function(editor, caller, callback) {
      var a, b = '', c = document.createElement('DIV'), i = 0, j = fa.length;
 
      for (; i<j; i++) b += '<i class="fa">' + fa[i] + '</i>';
 
      c.innerHTML = b;
 
      for (a = c.getElementsByTagName('I'), i = 0, j = a.length; i<j; i++) {
        a[i].onclick = function() {
          callback(this.innerHTML);
          autoClose && editor.closeDropDown(true);
        };
      }
 
      editor.createDropDown(caller, 'fontawesome', c);
    },
 
    // wysiwyg
    exec : function(c) {
      var e = this;
      $.sceditor.command.get('fontawesome').dropDown(e, c, function(icon) {
        e.insert(' [font=FontAwesome]' + A + icon + O + '[/font]&nbsp;', '', true, true, true);
      });
    },
 
    // mode source
    txtExec : function(c) {
      var e = this;
      $.sceditor.command.get('fontawesome').dropDown(e, c, function(icon) {
        e.insert(' [font=FontAwesome]' + A + icon + O + '[/font] ', '');
      });
    },
 
    tooltip : 'Font Awesome Icons'
  });
 
  toolbar = toolbar.replace(/date,/,'fontawesome,date,'); // ajoute le bouton à la barre d'outils
});